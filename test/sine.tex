% !TeX TS-program = pdflatex

\documentclass[a4paper]{article}

\usepackage{parskip}
\usepackage{tikz}
\usepackage[left=1.2in,right=1.2in,top=1in,bottom=1.5in,footskip=0.4in,showframe]{geometry}

\begin{document}

\def\sine#1{%
\begin{tikzpicture}[scale=#1,domain=0:2*pi]
    \draw[very thin,color=gray] (-0.1,-1.1) grid (6.3,1.1);
    \draw[color=blue,samples=51]   plot (\x,{sin(\x r)})   node[right] {$f(x) = \sin x$};
    \draw[color=red,samples=51]   plot (\x,{cos(\x r)})   node[right] {$f(x) = \cos x$};
\end{tikzpicture}%
}


%% Save picture to extract width
%\sbox0{\sine{1.0}}
%\copy0
%
%Width of Tikz picture: \the\wd0
%
%Width of text: \the\textwidth
%
%% Calculate scale
%\makeatletter
%\pgfmathsetmacro{\scale}{\strip@pt\textwidth/\strip@pt\wd0}
%\makeatother
%
%Scaling factor: \scale
%
%% Plot sine with scale
%\sine{\scale}
%
%{\hfill\rule{0.8\textwidth}{0.4pt}\hfill}

\foreach \x in {1.00,1.01,...,2.99} {
	\sbox0{\sine{\x}}
	\ifdim\wd0>0.9\textwidth
		\xdef\scale{\x}
		\breakforeach
	\fi
}

\sine{1}

\scale

\sine{\scale}

\end{document}
